<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Natural Language Query</title>
    <base href="/" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="app.css" rel="stylesheet" />
    <style>
        /* Ensure error UI is hidden on initial load */
        #blazor-error-ui {
            display: none !important;
        }

        /* Force hide any checkbox elements in the navbar */
        .navbar input[type="checkbox"],
        .navbar-toggler[type="checkbox"],
        input.navbar-toggler,
        .sidebar input[type="checkbox"] {
            display: none !important;
            visibility: hidden !important;
            width: 0 !important;
            height: 0 !important;
            position: absolute !important;
            left: -9999px !important;
        }

        /* Ensure nav-scrollable is always visible on desktop */
        @media (min-width: 641px) {
            .nav-scrollable {
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
            }
        }
    </style>
</head>
<body>
<div id="app">Loading...</div>

<script src="_framework/blazor.webassembly.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script>
    window.scrollToBottom = function (elementId) {
        const element = document.getElementById(elementId);
        if (element) {
            element.scrollTop = element.scrollHeight;
        }
    };

    // Copy text to clipboard function
    window.copyToClipboard = async function (text) {
        try {
            if (navigator.clipboard && window.isSecureContext) {
                // Use the modern Clipboard API if available
                await navigator.clipboard.writeText(text);
                console.log('Text copied to clipboard using Clipboard API');
            } else {
                // Fallback for older browsers or non-secure contexts
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                textArea.style.top = '-999999px';
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();

                const successful = document.execCommand('copy');
                document.body.removeChild(textArea);

                if (successful) {
                    console.log('Text copied to clipboard using fallback method');
                } else {
                    throw new Error('Copy command failed');
                }
            }
        } catch (err) {
            console.error('Failed to copy text to clipboard:', err);
            // You could show a toast notification here if desired
        }
    };

    // Ensure error UI is hidden on page load
    document.addEventListener('DOMContentLoaded', function() {
        const errorUI = document.getElementById('blazor-error-ui');
        if (errorUI) {
            errorUI.style.display = 'none';
            errorUI.classList.remove('show');
        }
    });

    // Also hide after Blazor initializes
    if (window.Blazor) {
        window.Blazor.start().then(function() {
            const errorUI = document.getElementById('blazor-error-ui');
            if (errorUI) {
                errorUI.style.display = 'none';
                errorUI.classList.remove('show');
            }
        });
    }

    // Handle error UI dismiss
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('dismiss') || e.target.classList.contains('reload')) {
            const errorUI = document.getElementById('blazor-error-ui');
            if (errorUI) {
                errorUI.style.display = 'none';
                errorUI.classList.remove('show');
            }
            if (e.target.classList.contains('reload')) {
                location.reload();
            }
        }
    });

    // Only show error UI when Blazor explicitly encounters an error
    window.addEventListener('error', function(e) {
        // Only show for actual Blazor errors, not all JS errors
        if (e.message && e.message.includes('blazor')) {
            const errorUI = document.getElementById('blazor-error-ui');
            if (errorUI) {
                errorUI.style.display = 'block';
                errorUI.classList.add('show');
            }
        }
    });

    // Add scroll effect to navbar
    window.addEventListener('scroll', function() {
        const navbar = document.querySelector('.navbar');
        if (navbar) {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        }
    });
</script>
</body>
</html>